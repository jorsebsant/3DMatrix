<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
</head>
<body>



</body>
</html>
<script>
	
	//MODULE PATTERN JAVASCRIPT

	//MÓDULO DE MATRIZ
	//Se encarga de todas las operaciones relacionadas con la matriz
	var Matriz= (function(){

		return {

			//Inicializar matriz de a cuerdo al tamaño elegido por el usuario
			initMatrix: function(tamano){
				var matrix3D = [];
				for(var n = 1; n <= tamano; n++){
				    matrix3D[n] = [];    
				   
				        matrix3D[n][n] = [];

				        //Profundidad Z
				        matrix3D[n][n][n]=0;    
				      
				}
				console.log(matrix3D);
				return matrix3D;
			},

			//Actualiza la Matriz
			updateMatrix: function (operation,matrix){

				var operation=operation.split(" ");
				var x=operation[1];
				var y=operation[2];
				var z=operation[3];
				var w=operation[4];
				
				matrix[x][y][z]=w;

				return matrix;
				
			},
			//Consulta la matriz
			queryMatrix: function(operation,matrix){
				var operation=operation.split(" ");
				var x1=operation[1];
				var y1=operation[2];
				var z1=operation[3];

				var x2=operation[4];
				var y2=operation[5];
				var z2=operation[6];

				var suma=0;

				for(var n=x1; n<=x2;n++){

					suma+=parseInt(matrix[n][n][n]);
				}
				return suma;			

			}

		}

	})();


	var Test=(function(){

		return {

			//inicia los casos de prueba
			initCases: function(testCases){
				var result="";
				while(testCases>0){
					var init=prompt('Ingrese el tamaño de la matriz (N) y la cantidad de operaciones por caso de prueba (M)'+
					'separados por un espacio').split(" ");

					//Dimensiones Matriz
					var n=init[0];
					if(1>=n||n>=100){
						alert('ingrese dimensiones válidas entre 1 y 100');
						continue;
					}	
					//Operaciones
					var m=init[1];

					var matrix=Matriz.initMatrix(n);

					for (var i = 0; i < m; i++) {
						var operacion=prompt("Ingrese la operacion "+(i+1));
						if(operacion.indexOf('UPDATE')>-1){
							matrix=Matriz.updateMatrix(operacion,matrix);
							
						}else if(operacion.indexOf('QUERY')>-1){
							result=Matriz.queryMatrix(operacion,matrix);
							alert('El resultado de la operación es '+result);
							console.log(result);
							document.write(result+'\n');
						}else{
							alert('Operación inválida');
							i--;
						}
					}
					testCases--;
				}
			}
		}

	})();


	//INIT DEL SISTEMA
	var x=0;
	//Cantidad de casos de prueba
	while(x==0){
	 var testCases = prompt('Ingrese la cantidad de casos de prueba');

	 if(1<=testCases&&testCases<=50){
	 	Test.initCases(testCases);
	 	x=1;
	 }else if(testcases==''){
	 	x=1;
	 }else{
	 	alert('Ingrése un número valido de casos de prueba entre 1 y 50');
	 }	
	}
	

	

	


	




	


</script>